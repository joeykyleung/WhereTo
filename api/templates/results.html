{% extends "layout.html" %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename = 'results.css')}}" />
{% endblock %}

{% block body%}
    <div class="wrapper">
        <div>
            <div class="title">
                {{ info['name'] }} <br />
                <p>{{ duration }} minutes to get there</p>
            </div>
            <table class="details">
                {% for key, value in info.items() %}
                    {% if key != 'name' and key != 'subtype'%}
                        <tr>
                            <td style="text-transform: capitalize;">{{ key }}</td>
                            <td class="one">:</td>
                            <td style="text-transform: capitalize;">
                                {% if value %}
                                    {{ value }}
                                {% else %}
                                    N/A
                                {% endif %}
                            </td>
                        </tr>
                    {% endif %}
                {% endfor %}
            </table>
        </div>
        {% if info['subtype'] == 'restaurant' %}
            <img class="round-image" src="/static/restaurant.jpg" alt="restaurant image">
        {% elif info['subtype'] == 'attraction' %}
            <img class="round-image" src="/static/attractions.jpg" alt="tourist attraction image">
        {% else %}
            <img class="round-image" src="/static/sights.jpg" alt="sightseeing image">
        {% endif %}
    </div>

    <div id="LineTime">
        <div class="container-fluid">
            <div class="row timeline-centered">
                <div class="col-md-12 timelineMAIN-title">
                    <ul class="timeline timeline-centered">
                        {% for leg in legs %}
                        <li class="timeline-item">
                            <div class="timeline-info">
                                <span>{{ leg['duration'] }} minutes</span>
                            </div>
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <h3 class="timeline-title">{{ leg['summary'] }}</h3>
                                <ul style="margin: 20px auto;">
                                    {% if leg['steps'] %}
                                        {% for step in leg['steps'] %}
                                            <li>{{ step }}</li>
                                        {% endfor %}
                                    {% endif %}
                                    {% if leg['path'] %}
                                        {% for stop in leg['path'] %}
                                            <li>{{ stop }}</li>
                                        {% endfor %}
                                    {% endif %}
                                </ul>
                                <h6>Arrive at {{ leg['arrivalPoint'] }}</h6>
                            </div>
                        </li>
                        {% endfor %}
                        <li class="timeline-item period">
                            <div class="timeline-marker"></div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="mag" class="mag"></div>
    <script>
        var draggableElement = document.getElementById('mag');
        var offsetX, offsetY;
        var isDragging = false;
      
        draggableElement.addEventListener('mousedown', function (e) {
          isDragging = true;
          offsetX = e.clientX - draggableElement.getBoundingClientRect().left;
          offsetY = e.clientY - draggableElement.getBoundingClientRect().top;
          draggableElement.style.cursor = 'grabbing';
        });
      
        document.addEventListener('mousemove', function (e) {
          if (isDragging) {
            var x = e.pageX - offsetX + draggableElement.offsetWidth / 2;
            var y = e.pageY - offsetY + draggableElement.offsetHeight / 2;

            draggableElement.style.left = x + 'px';
            draggableElement.style.top = y + 'px';
          }
        });
      
        document.addEventListener('mouseup', function () {
          isDragging = false;
          draggableElement.style.cursor = 'grab';
        });
      </script>
{% endblock %}